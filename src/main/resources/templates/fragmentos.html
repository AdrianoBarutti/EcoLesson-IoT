<head th:fragment="cabecalho(parametro)">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title th:text="${parametro}"></title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
          crossorigin="anonymous" />
    <link href="/css/ecolesson.css" rel="stylesheet" />
</head>
  
  
   <!-- Option 1: Bootstrap Bundle with Popper -->
    <script th:fragment="script-js" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
 
 
 
<div th:fragment="form-logout" style="float:right;">
    <form th:action="@{/logout}" method="post">
        <button type="submit" class="btn btn-outline-danger btn-sm" th:text="#{botao.sair}">Sair</button>
    </form>
</div>


<!-- Troca de idiomas -->
<div th:fragment="idioma(uri)" style="float:right;">
    <a th:href="@{__${uri}__(lang='pt')}" class="btn btn-link btn-sm">PT</a>
    <a th:href="@{__${uri}__(lang='en')}" class="btn btn-link btn-sm">ENG</a>
</div>


<!-- src/main/resources/templates/fragmentos/chatbot.html -->
<div th:fragment="chatbot">
    <form id="chatForm" th:action="@{'/cursos/' + ${curso.idCurso} + '/perguntar'}" method="post" class="input-group">
        <input class="form-control" type="text" name="mensagem" placeholder="Digite sua dÃºvida sobre o tema..." required/>
        <button class="btn btn-primary" type="submit">Perguntar IA</button>
    </form>
    <div id="chatResponse" class="mt-2 text-primary"></div>

    <script>
    document.querySelector('#chatForm').onsubmit = async (e) => {
        e.preventDefault();
        const form = e.target;
        const res = await fetch(form.action, {
            method: 'POST',
            headers: { 'Content-Type':'application/x-www-form-urlencoded' },
            body: new URLSearchParams(new FormData(form))
        });
        document.getElementById('chatResponse').innerText = await res.text();
        form.reset();
    };
    </script>
</div>


	
	